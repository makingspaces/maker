<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Making with Tink ✨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            z-index: 1000;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #667eea;
        }

        .mobile-menu {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .section {
            min-height: 100vh;
            padding: 6rem 0;
            display: flex;
            align-items: center;
        }

        .hero {
            text-align: center;
            color: white;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            animation: float 3s ease-in-out infinite;
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .fairy-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: sparkle 2s ease-in-out infinite alternate;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes sparkle {
            0% { opacity: 0.7; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.1); }
        }

        .cta-button {
            display: inline-block;
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .content-section {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            margin: 2rem auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            max-width: 800px;
        }

        .section-title {
            font-size: 2.5rem;
            margin-bottom: 2rem;
            color: #667eea;
            text-align: center;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .project-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .project-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .project-card h3 {
            color: #333;
            margin-bottom: 1rem;
        }

        .chat-container {
            background: transparent;
            border-radius: 20px;
            padding: 0;
            box-shadow: none;
            max-width: 100%;
            margin: 0;
        }

        .chat-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .chat-messages {
            height: 400px;
            overflow-y: auto;
            border: 1px solid #e1e5e9;
            border-radius: 15px;
            padding: 1rem;
            margin-bottom: 1rem;
            background: #f8f9fa;
        }

        .message {
            margin: 1rem 0;
            padding: 1rem;
            border-radius: 15px;
            max-width: 80%;
        }

        .user-message {
            background: #667eea;
            color: white;
            margin-left: auto;
        }

        .tink-message {
            background: #e9ecef;
            color: #333;
            margin-right: auto;
        }

        .chat-input-container {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .image-upload-button {
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .image-upload-button:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .image-preview {
            margin-top: 1rem;
            position: relative;
            display: inline-block;
        }

        .image-preview img {
            max-width: 200px;
            max-height: 150px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .remove-image {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4757;
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .message img {
            max-width: 100%;
            border-radius: 10px;
            margin: 0.5rem 0;
        }

        .chat-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .send-button {
            padding: 1rem 2rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
        }

        .send-button:hover {
            background: #5a6fd8;
        }

        .contact-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #333;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .submit-button {
            width: 100%;
            padding: 1rem;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .submit-button:hover {
            background: #5a6fd8;
        }

        .footer {
            background: #333;
            color: white;
            text-align: center;
            padding: 2rem 0;
        }

        .thinking-process {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .design-thinking-toggle {
            text-align: center;
            margin: 2rem 0 1rem 0;
        }

        .toggle-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .toggle-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        #toggleIcon {
            display: inline-block;
            transition: transform 0.3s ease;
            margin-left: 0.5rem;
        }

        .rotated {
            transform: rotate(180deg);
        }

        .project-share-form {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            border: 2px solid #f0ad4e;
            box-shadow: 0 4px 15px rgba(240, 173, 78, 0.3);
        }

        .project-share-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            margin: 0.5rem 0;
        }

        .project-share-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        .project-form-group {
            margin-bottom: 1.5rem;
        }

        .project-form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #8b4513;
            font-weight: 600;
        }

        .project-form-group input,
        .project-form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #deb887;
            border-radius: 10px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.9);
        }

        .project-form-group input:focus,
        .project-form-group textarea:focus {
            outline: none;
            border-color: #ff6b6b;
        }

        .project-image-upload {
            border: 2px dashed #deb887;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.5);
        }

        .project-image-upload:hover {
            border-color: #ff6b6b;
            background: rgba(255, 255, 255, 0.8);
        }

        .project-image-preview {
            margin-top: 1rem;
            text-align: center;
        }

        .project-image-preview img {
            max-width: 200px;
            max-height: 150px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .community-project {
            border: 2px solid #667eea;
            background: linear-gradient(135deg, #f0f4ff 0%, #e6eeff 100%);
        }

        .community-project .project-icon {
            color: #667eea;
        }

        .user-projects-header {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 2rem;
        }

        .project-image img {
            transition: transform 0.3s ease;
        }

        .project-image img:hover {
            transform: scale(1.05);
        }

        .project-date {
            font-size: 0.8rem;
            color: #666;
            margin-top: 0.5rem;
        }

        .step-icon {
            font-size: 2rem;
            margin-right: 1rem;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .mobile-menu {
                display: block;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.1rem;
            }
            
            .content-section {
                padding: 2rem;
                margin: 1rem 0;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .gallery-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 0 1rem;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="#home" class="logo">✨ Making with Tink</a>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#chat">Chat with Tink</a></li>
                <li><a href="#gallery">Gallery</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <button class="mobile-menu">☰</button>
        </div>
    </nav>

    <section id="home" class="section hero">
        <div class="container">
            <div class="fairy-icon">🧚‍♀️</div>
            <h1>Making with Tink</h1>
            <p>Your friendly maker fairy is here to help you bring ideas to life!</p>
            <p>From dreams to prototypes, let's design thinking together ✨</p>
            <a href="#chat" class="cta-button">Start Creating</a>
        </div>
    </section>

    <section id="chat" class="section">
        <div class="container">
            <div class="content-section">
                <h2 class="section-title">Chat with Tink 💭</h2>
                
                <div class="chat-container">
                    <div class="chat-header">
                        <h3>Ready to start your making journey? 🚀</h3>
                        <p>Tink will guide you through the design thinking process step by step!</p>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <div class="message tink-message">
                            <strong>Tink 🧚‍♀️:</strong> Hello there, creative maker! I'm Tink, your friendly design thinking companion. I'm here to help you turn your ideas into amazing hands-on solutions! 
                            <br><br>
                            What would you like to make today? Tell me about the idea that's sparkling in your mind! ✨
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <label for="imageUpload" class="image-upload-button" title="Share a photo with Tink!">
                            📷
                        </label>
                        <input type="file" id="imageUpload" accept="image/*" style="display: none;">
                        <input type="text" class="chat-input" id="chatInput" placeholder="Share your making idea with Tink...">
                        <button class="send-button" onclick="sendMessage()">Send ✨</button>
                    </div>
                    <div id="imagePreview" class="image-preview" style="display: none;">
                        <img id="previewImg" src="" alt="Preview">
                        <button class="remove-image" onclick="removeImage()">✕</button>
                    </div>
                </div>
                
                <div class="design-thinking-toggle">
                    <button class="toggle-button" onclick="toggleDesignThinking()">
                        🌟 Learn about Design Thinking <span id="toggleIcon">▼</span>
                    </button>
                </div>
                
                <div class="thinking-process" id="designThinkingProcess" style="display: none;">
                    <h3 style="text-align: center; margin-bottom: 1rem;">🌟 Design Thinking Journey</h3>
                    <div class="process-step">
                        <div class="step-icon">💝</div>
                        <div>
                            <strong>Empathy:</strong> Who are you making this for? What do they need?
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">🎯</div>
                        <div>
                            <strong>Define:</strong> What's the real problem we're solving?
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">💡</div>
                        <div>
                            <strong>Ideate:</strong> Let's brainstorm creative solutions together!
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">🔨</div>
                        <div>
                            <strong>Prototype:</strong> Time to build and test your ideas!
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-icon">🧪</div>
                        <div>
                            <strong>Test:</strong> How did it work? What can we improve?
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="gallery" class="section">
        <div class="container">
            <div class="content-section">
                <h2 class="section-title">Project Gallery 🎨</h2>
                <p style="text-align: center; margin-bottom: 2rem;">Explore amazing projects created by our maker community!</p>
                
                <div class="gallery-grid">
                    <div class="project-card">
                        <div class="project-icon">🏠</div>
                        <h3>Smart Garden Helper</h3>
                        <p>An automated watering system that helps plants thrive, designed by a 12-year-old maker for their grandmother's garden.</p>
                    </div>
                    
                    <div class="project-card">
                        <div class="project-icon">♿</div>
                        <h3>Accessible Game Controller</h3>
                        <p>A custom controller designed to make gaming accessible for friends with different physical abilities.</p>
                    </div>
                    
                    <div class="project-card">
                        <div class="project-icon">📚</div>
                        <h3>Reading Light Reminder</h3>
                        <p>A gentle LED system that reminds busy parents when it's bedtime story time with their kids.</p>
                    </div>
                    
                    <div class="project-card">
                        <div class="project-icon">🐕</div>
                        <h3>Pet Exercise Tracker</h3>
                        <p>A fun way to make sure pets get enough exercise while keeping owners motivated too!</p>
                    </div>
                    
                    <div class="project-card">
                        <div class="project-icon">🎵</div>
                        <h3>Memory Music Box</h3>
                        <p>A device that plays special songs to help elderly family members with memory care.</p>
                    </div>
                    
                    <div class="project-card">
                        <div class="project-icon">🌱</div>
                        <h3>Classroom Compost Monitor</h3>
                        <p>A sensor system that teaches kids about sustainability while managing their school's composting program.</p>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 2rem;">
                    <p><em>Want to share your project? <a href="#contact" style="color: #667eea;">Get in touch!</a></em></p>
                </div>
            </div>
        </div>
    </section>

    <section id="contact" class="section">
        <div class="container">
            <div class="content-section">
                <h2 class="section-title">Get in Touch 📬</h2>
                <p style="text-align: center; margin-bottom: 2rem;">Have questions, want to share your project, or just say hello?</p>
                
                <div class="contact-form">
                    <form id="contactForm" name="contact" method="POST" data-netlify="true">
                        <input type="hidden" name="form-name" value="contact">
                        
                        <div class="form-group">
                            <label for="name">Your Name</label>
                            <input type="text" id="name" name="name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="age">Age (optional - helps us personalize our response!)</label>
                            <input type="number" id="age" name="age" min="1" max="120">
                        </div>
                        
                        <div class="form-group">
                            <label for="project">What are you working on or dreaming about?</label>
                            <textarea id="project" name="project" rows="4" placeholder="Tell us about your making journey!"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="message">Message</label>
                            <textarea id="message" name="message" rows="5" required placeholder="How can Tink help you today?"></textarea>
                        </div>
                        
                        <button type="submit" class="submit-button">Send Message ✨</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Making with Tink. Spreading maker magic everywhere! ✨</p>
            <p>Designed with 💜 for makers of all ages</p>
        </div>
    </footer>

    <!-- Hidden Netlify form for project submissions -->
    <form name="project-submissions" netlify netlify-honeypot="bot-field" hidden>
        <input type="text" name="project-name" />
        <textarea name="learning"></textarea>
        <input type="text" name="maker-name" />
        <input type="text" name="maker-age" />
        <input type="url" name="image-url" />
        <input type="text" name="submission-date" />
    </form>

    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Toggle Design Thinking section
        function toggleDesignThinking() {
            const process = document.getElementById('designThinkingProcess');
            const icon = document.getElementById('toggleIcon');
            
            if (process.style.display === 'none') {
                process.style.display = 'block';
                icon.textContent = '▲';
                icon.classList.add('rotated');
            } else {
                process.style.display = 'none';
                icon.textContent = '▼';
                icon.classList.remove('rotated');
            }
        }
        
        // Conversation history storage
        let conversationHistory = [];
        let currentImage = null;
        let projectImage = null;

        // Project sharing functionality
        function showProjectShareForm() {
            const messages = document.getElementById('chatMessages');
            
            const formContainer = document.createElement('div');
            formContainer.className = 'project-share-form';
            formContainer.innerHTML = `
                <h3 style="color: #8b4513; text-align: center; margin-bottom: 1rem;">✨ Share Your Project! ✨</h3>
                <p style="text-align: center; margin-bottom: 1.5rem;">Help inspire other makers by sharing what you've created!</p>
                
                <form id="projectShareForm">
                    <div class="project-form-group">
                        <label for="projectPhoto">📷 Photo of Your Project *</label>
                        <div class="project-image-upload" onclick="document.getElementById('projectPhotoInput').click()">
                            <div>📸 Click here to upload a photo of your creation!</div>
                            <small style="color: #666;">JPG, PNG, or WebP formats</small>
                        </div>
                        <input type="file" id="projectPhotoInput" accept="image/*" style="display: none;">
                        <div id="projectImagePreview" class="project-image-preview" style="display: none;"></div>
                    </div>
                    
                    <div class="project-form-group">
                        <label for="projectName">🛠️ What did you make? *</label>
                        <input type="text" id="projectName" placeholder="e.g., Smart Plant Watering System" required>
                    </div>
                    
                    <div class="project-form-group">
                        <label for="projectLearning">💡 What's one thing you learned? *</label>
                        <textarea id="projectLearning" rows="3" placeholder="Share your biggest learning or insight from this project..." required></textarea>
                    </div>
                    
                    <div class="project-form-group">
                        <label for="makerName">✨ Your Name (optional)</label>
                        <input type="text" id="makerName" placeholder="How should we credit you?">
                    </div>
                    
                    <div class="project-form-group">
                        <label for="makerAge">🎂 Your Age (optional)</label>
                        <input type="number" id="makerAge" min="1" max="120" placeholder="Helps us celebrate makers of all ages!">
                    </div>
                    
                    <button type="submit" class="project-share-button" style="width: 100%;">
                        🌟 Share My Project! 🌟
                    </button>
                </form>
            `;
            
            messages.appendChild(formContainer);
            messages.scrollTop = messages.scrollHeight;
            
            // Set up form handling
            setupProjectForm();
        }

        function setupProjectForm() {
            // Handle image upload
            document.getElementById('projectPhotoInput').addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file && file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        projectImage = {
                            data: e.target.result,
                            type: file.type,
                            name: file.name
                        };
                        
                        const preview = document.getElementById('projectImagePreview');
                        preview.innerHTML = `<img src="${e.target.result}" alt="Project preview">`;
                        preview.style.display = 'block';
                        
                        // Update upload area
                        const uploadArea = document.querySelector('.project-image-upload');
                        uploadArea.innerHTML = '<div style="color: #28a745;">✅ Photo uploaded! Click to change</div>';
                    };
                    reader.readAsDataURL(file);
                }
            });
            
            // Handle form submission
            document.getElementById('projectShareForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const submitButton = this.querySelector('.project-share-button');
                const originalText = submitButton.textContent;
                submitButton.textContent = 'Sharing... ✨';
                submitButton.disabled = true;
                
                // Get form data
                const projectData = {
                    photo: projectImage,
                    name: document.getElementById('projectName').value,
                    learning: document.getElementById('projectLearning').value,
                    makerName: document.getElementById('makerName').value || 'Anonymous Maker',
                    makerAge: document.getElementById('makerAge').value || 'Not specified'
                };
                
                if (!projectImage) {
                    alert('Please upload a photo of your project!');
                    submitButton.textContent = originalText;
                    submitButton.disabled = false;
                    return;
                }
                
                try {
                    // Submit to Google Form (you'll need to set up the form)
                    const success = await submitProjectToGoogleForm(projectData);
                    
                    if (success) {
                        // Show success message
                        const successMsg = document.createElement('div');
                        successMsg.style.cssText = `
                            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
                            color: #155724;
                            padding: 2rem;
                            border-radius: 15px;
                            margin-top: 1rem;
                            text-align: center;
                            border: 2px solid #b8dacc;
                        `;
                        successMsg.innerHTML = `
                            <div style="font-size: 2rem; margin-bottom: 1rem;">🎉🧚‍♀️</div>
                            <h3 style="margin-bottom: 1rem;">Project Shared Successfully!</h3>
                            <p>Thank you for sharing your amazing creation! Your project will inspire other makers in our community. Keep making magic! ✨</p>
                        `;
                        
                        this.parentNode.appendChild(successMsg);
                        this.style.display = 'none';
                        
                        // Add Tink's response
                        setTimeout(() => {
                            const messages = document.getElementById('chatMessages');
                            const tinkResponse = document.createElement('div');
                            tinkResponse.className = 'message tink-message';
                            tinkResponse.innerHTML = `<strong>Tink 🧚‍♀️:</strong> Wonderful! Your project has been shared with our maker community! I'm so proud of what you've accomplished. Your creation will inspire others to start their own making journeys. Keep dreaming, designing, and creating! ✨🌟`;
                            messages.appendChild(tinkResponse);
                            messages.scrollTop = messages.scrollHeight;
                        }, 1000);
                    }
                } catch (error) {
                    console.error('Project submission error:', error);
                    alert('Oops! There was an issue sharing your project. Please try again.');
                    submitButton.textContent = originalText;
                    submitButton.disabled = false;
                }
            });
        }

        async function submitProjectToGoogleForm(projectData) {
            console.log('🧚‍♀️ Starting project submission...', projectData);
            
            try {
                const formData = new FormData();
                
                // Your actual form entry IDs
                formData.append('entry.542386460', projectData.name);        // Project Name
                formData.append('entry.1071470430', projectData.learning);   // What I Learned
                formData.append('entry.877515072', projectData.makerName);   // Maker Name
                formData.append('entry.1323240392', projectData.makerAge);   // Maker Age
                
                console.log('📝 Added text fields to form data');
                
                // Upload image to Imgur first, then submit the URL to Google Forms
                if (projectData.photo) {
                    console.log('📷 Uploading image to Imgur...');
                    try {
                        const imageUrl = await uploadImageToImgur(projectData.photo);
                        console.log('✅ Imgur upload successful:', imageUrl);
                        formData.append('entry.121330878', imageUrl);
                    } catch (imgurError) {
                        console.error('❌ Imgur upload failed:', imgurError);
                        formData.append('entry.121330878', 'Image upload failed - please try again');
                    }
                } else {
                    console.log('ℹ️ No image provided');
                    formData.append('entry.121330878', 'No image provided');
                }
                
                console.log('🚀 Submitting to Google Form...');
                console.log('📤 Form data entries:');
                for (let [key, value] of formData.entries()) {
                    console.log(`  ${key}:`, value);
                }
                
                const response = await fetch('https://docs.google.com/forms/d/e/1FAIpQLSf9Hi_30IAZJ9nQFw7gDW9HDqDy92kzWw2OI-ABIbo7jKCMEQ/formResponse', {
                    method: 'POST',
                    body: formData,
                    mode: 'no-cors' // Required for Google Forms
                });
                
                console.log('📨 Google Form response:', response);
                console.log('✅ Submission completed successfully');
                
                return true; // Google Forms always returns opaque response with no-cors
            } catch (error) {
                console.error('💥 Google Form submission error:', error);
                return false;
            }
        }

        // Upload images to Imgur for Google Forms compatibility
        async function uploadImageToImgur(imageData) {
            console.log('🖼️ Starting Imgur upload...');
            
            try {
                // Convert base64 to blob
                const base64Data = imageData.data.split(',')[1];
                console.log('📊 Image data size:', base64Data.length, 'characters');
                
                const response = await fetch('https://api.imgur.com/3/image', {
                    method: 'POST',
                    headers: {
                        'Authorization': 'Client-ID 546c25a59c58ad7', // Public Imgur client ID
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        image: base64Data,
                        type: 'base64'
                    })
                });
                
                console.log('📡 Imgur response status:', response.status);
                const result = await response.json();
                console.log('📋 Imgur response data:', result);
                
                if (result.success) {
                    console.log('🎉 Imgur upload successful!');
                    return result.data.link;
                }
                throw new Error('Imgur upload failed: ' + (result.data?.error || 'Unknown error'));
            } catch (error) {
                console.error('💥 Image upload error:', error);
                throw error; // Re-throw to trigger error handling in main function
            }
        }

        // Image upload handling
        document.getElementById('imageUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    currentImage = {
                        data: e.target.result,
                        type: file.type
                    };
                    
                    // Show preview
                    const preview = document.getElementById('imagePreview');
                    const previewImg = document.getElementById('previewImg');
                    previewImg.src = e.target.result;
                    preview.style.display = 'block';
                    
                    // Update placeholder text
                    document.getElementById('chatInput').placeholder = "Tell Tink about this image...";
                };
                reader.readAsDataURL(file);
            }
        });

        // Remove image function
        function removeImage() {
            currentImage = null;
            document.getElementById('imagePreview').style.display = 'none';
            document.getElementById('chatInput').placeholder = "Share your making idea with Tink...";
            document.getElementById('imageUpload').value = '';
        }

        // Chat functionality with Claude API integration
        async function sendMessage() {
            const input = document.getElementById('chatInput');
            const messages = document.getElementById('chatMessages');
            const sendButton = document.querySelector('.send-button');
            const messageText = input.value.trim();
            
            if (messageText === '' && !currentImage) return;
            
            // Disable input and button while processing
            input.disabled = true;
            sendButton.disabled = true;
            sendButton.textContent = 'Thinking... ✨';
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'message user-message';
            
            let messageContent = '';
            if (messageText) {
                messageContent = `<strong>You:</strong> ${messageText}`;
            } else {
                messageContent = `<strong>You:</strong> <em>Shared an image</em>`;
            }
            
            if (currentImage) {
                messageContent += `<br><img src="${currentImage.data}" alt="Uploaded image">`;
            }
            userMessage.innerHTML = messageContent;
            messages.appendChild(userMessage);
            
            // Clear input and image
            input.value = '';
            const imageToSend = currentImage;
            removeImage();
            
            // Scroll to bottom
            messages.scrollTop = messages.scrollHeight;
            
            try {
                // Get response from Claude API
                const response = await callClaudeAPI(messageText || '', imageToSend);
                
                const tinkResponse = document.createElement('div');
                tinkResponse.className = 'message tink-message';
                tinkResponse.innerHTML = `<strong>Tink 🧚‍♀️:</strong> ${response}`;
                messages.appendChild(tinkResponse);
                
                // Check if Tink mentioned the share project button
                if (response.includes('Share Your Project button') || response.includes('✨ Share Your Project')) {
                    // Add the share project button
                    setTimeout(() => {
                        const buttonContainer = document.createElement('div');
                        buttonContainer.style.cssText = 'text-align: center; margin: 1rem 0;';
                        buttonContainer.innerHTML = `
                            <button class="project-share-button" onclick="showProjectShareForm()" style="animation: pulse 2s infinite;">
                                ✨ Share Your Project ✨
                            </button>
                            <style>
                                @keyframes pulse {
                                    0% { transform: scale(1); }
                                    50% { transform: scale(1.05); }
                                    100% { transform: scale(1); }
                                }
                            </style>
                        `;
                        messages.appendChild(buttonContainer);
                        messages.scrollTop = messages.scrollHeight;
                    }, 500);
                }
                
                messages.scrollTop = messages.scrollHeight;
            } catch (error) {
                console.error('Chat error:', error);
                const errorResponse = document.createElement('div');
                errorResponse.className = 'message tink-message';
                errorResponse.innerHTML = `<strong>Tink 🧚‍♀️:</strong> Oops! My magic sparkles got a bit tangled. Please try again! ✨`;
                messages.appendChild(errorResponse);
                messages.scrollTop = messages.scrollHeight;
            } finally {
                // Re-enable input and button
                input.disabled = false;
                sendButton.disabled = false;
                sendButton.textContent = 'Send ✨';
                input.focus();
            }
        }
        
        // Allow Enter key to send message
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
        
        // Contact form submission
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault(); // Prevent default form submission
            
            const submitButton = this.querySelector('.submit-button');
            const originalText = submitButton.textContent;
            submitButton.textContent = 'Sending... ✨';
            submitButton.disabled = true;
            
            // Get form data
            const formData = new FormData(this);
            
            // Submit to Netlify
            fetch('/', {
                method: 'POST',
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: new URLSearchParams(formData).toString()
            })
            .then(() => {
                // Success
                submitButton.textContent = '✨ Message Sent! ✨';
                submitButton.style.background = '#28a745';
                this.reset();
                
                // Show enhanced success message
                const successMsg = document.createElement('div');
                successMsg.style.cssText = `
                    background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
                    color: #155724;
                    padding: 2rem;
                    border-radius: 15px;
                    margin-top: 2rem;
                    text-align: center;
                    border: 2px solid #b8dacc;
                    box-shadow: 0 4px 15px rgba(40, 167, 69, 0.2);
                `;
                successMsg.innerHTML = `
                    <div style="font-size: 2rem; margin-bottom: 1rem;">🧚‍♀️✨</div>
                    <h3 style="margin-bottom: 1rem; color: #155724;">Thank You!</h3>
                    <p>Your message has been sent successfully! Tink is excited to help with your making journey and will get back to you soon with some maker magic!</p>
                    <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.8;">Feel free to continue chatting with Tink above while you wait! 💭</p>
                `;
                this.appendChild(successMsg);
                
                // Smooth scroll to show the message
                successMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Reset button after 5 seconds (longer to let them read the message)
                setTimeout(() => {
                    submitButton.textContent = originalText;
                    submitButton.style.background = '#667eea';
                    submitButton.disabled = false;
                    if (successMsg.parentNode) {
                        successMsg.style.opacity = '0';
                        successMsg.style.transition = 'opacity 0.5s ease';
                        setTimeout(() => successMsg.remove(), 500);
                    }
                }, 5000);
            })
            .catch((error) => {
                // Error handling
                console.error('Error:', error);
                submitButton.textContent = 'Try Again ✨';
                submitButton.style.background = '#dc3545';
                
                // Show error message
                const errorMsg = document.createElement('div');
                errorMsg.style.cssText = `
                    background: #f8d7da;
                    color: #721c24;
                    padding: 1rem;
                    border-radius: 10px;
                    margin-top: 1rem;
                    text-align: center;
                    border: 1px solid #f5c6cb;
                `;
                errorMsg.innerHTML = 'Oops! Something went wrong. Please try again or reach out directly.';
                this.appendChild(errorMsg);
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    submitButton.textContent = originalText;
                    submitButton.style.background = '#667eea';
                    submitButton.disabled = false;
                    if (errorMsg.parentNode) {
                        errorMsg.remove();
                    }
                }, 3000);
            });
        });
        
        // Mobile menu toggle (simple version)
        document.querySelector('.mobile-menu').addEventListener('click', function() {
            const navLinks = document.querySelector('.nav-links');
            navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
        });
        
        // Claude API integration via Netlify Functions
        async function callClaudeAPI(message, image = null) {
            try {
                const response = await fetch('/.netlify/functions/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ 
                        message: message,
                        image: image,
                        conversationHistory: conversationHistory
                    })
                });
                
                const data = await response.json();
                
                if (data.conversationHistory) {
                    conversationHistory = data.conversationHistory;
                }
                
                return data.response;
            } catch (error) {
                console.error('Error calling Claude API:', error);
                return "Oops! Tink's magic is a bit tangled right now. Please try again! ✨";
            }
        }

        // Real Google Sheets integration for community projects
        async function loadCommunityProjects() {
            const SHEET_ID = '1UnOCu8HSufrnPXSIZYMV6Mqb0qqBL7uC-21Xh1aA7l4';
            const API_KEY = 'AIzaSyAcROsHqJVal_HGWRzdXtmf5nWD3mjS_08';
            const RANGE = 'Sheet1!A:F'; // Adjust if your data is in a different range
            
            try {
                console.log('🧚‍♀️ Fetching community projects from Google Sheets...');
                
                const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${RANGE}?key=${API_KEY}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('📊 Raw Google Sheets data:', data);
                
                if (!data.values || data.values.length < 2) {
                    console.log('ℹ️ No project data found in sheet');
                    return;
                }
                
                // Parse the data (first row should be headers)
                const [headers, ...rows] = data.values;
                console.log('📋 Headers:', headers);
                console.log('📋 Rows:', rows);
                
                // Convert rows to objects based on your column structure
                const projects = rows.map(row => {
                    const project = {
                        name: row[0] || '',           // Project Name
                        learning: row[1] || '',       // What I Learned  
                        makerName: row[2] || '',      // Maker Name
                        makerAge: row[3] || '',       // Maker Age
                        imageUrl: row[4] || '',       // Project Image URL
                        approved: row[5] || ''        // Approved
                    };
                    return project;
                }).filter(project => {
                    // Only show approved projects with content
                    const isApproved = project.approved.toLowerCase() === 'true' || project.approved.toLowerCase() === 'yes';
                    const hasContent = project.name && project.learning && project.makerName;
                    return isApproved && hasContent;
                });
                
                console.log('✅ Approved projects:', projects);
                
                if (projects.length === 0) {
                    console.log('ℹ️ No approved projects to display yet');
                    return;
                }
                
                // Display the projects
                displayCommunityProjects(projects);
                
            } catch (error) {
                console.error('❌ Error loading community projects:', error);
                // Fail silently - don't break the page if sheets are unavailable
            }
        }

        function displayCommunityProjects(projects) {
            const galleryGrid = document.querySelector('.gallery-grid');
            if (!galleryGrid) return;

            // Remove any existing community section
            const existingSection = galleryGrid.querySelector('.user-projects-section');
            if (existingSection) {
                existingSection.remove();
            }

            // Create community projects section
            const communitySection = document.createElement('div');
            communitySection.className = 'user-projects-section';
            communitySection.style.cssText = 'grid-column: 1 / -1; margin-bottom: 2rem;';
            
            communitySection.innerHTML = `
                <h3 style="text-align: center; color: #667eea; margin-bottom: 1rem;">
                    ✨ Projects from Our Maker Community ✨
                </h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                    ${projects.map(project => createCommunityProjectCard(project)).join('')}
                </div>
                <hr style="margin: 2rem 0; border: 1px solid #eee;">
                <h3 style="text-align: center; color: #667eea; margin-bottom: 1rem;">
                    💡 Example Maker Projects 💡
                </h3>
            `;

            // Insert at the beginning of the gallery
            galleryGrid.insertBefore(communitySection, galleryGrid.firstChild);
            
            console.log(`🎉 Displayed ${projects.length} community projects!`);
        }

        function createCommunityProjectCard(project) {
            const safeAge = project.makerAge && project.makerAge !== 'Not specified' && project.makerAge.trim() ? 
                `, age ${escapeHtml(project.makerAge)}` : '';
            
            const imageSection = project.imageUrl && project.imageUrl.trim() ? 
                `<div class="project-image" style="margin: 1rem 0;">
                    <img src="${escapeHtml(project.imageUrl)}" alt="${escapeHtml(project.name)}" 
                         style="max-width: 100%; height: 150px; object-fit: cover; border-radius: 8px; cursor: pointer;"
                         onclick="window.open('${escapeHtml(project.imageUrl)}', '_blank')"
                         onerror="this.style.display='none'">
                </div>` : '';
            
            return `
                <div class="project-card community-project">
                    <div class="project-icon">🌟</div>
                    <h3>${escapeHtml(project.name)}</h3>
                    ${imageSection}
                    <p><strong>What they learned:</strong> "${escapeHtml(project.learning)}"</p>
                    <p><em>Created by ${escapeHtml(project.makerName)}${safeAge}</em></p>
                    <div class="project-date">
                        Shared by our maker community ✨
                    </div>
                </div>
            `;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Load community projects when page loads
        document.addEventListener('DOMContentLoaded', () => {
            // Small delay to ensure gallery is rendered
            setTimeout(loadCommunityProjects, 1000);
        });

        // Admin functions for managing the gallery (accessible via browser console)
        window.adminGallery = {
            refresh: () => {
                console.log('🔄 Refreshing community projects...');
                loadCommunityProjects();
            },
            testAPI: async () => {
                const SHEET_ID = '1UnOCu8HSufrnPXSIZYMV6Mqb0qqBL7uC-21Xh1aA7l4';
                const API_KEY = 'AIzaSyAcROsHqJVal_HGWRzdXtmf5nWD3mjS_08';
                try {
                    const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/Sheet1!A:F?key=${API_KEY}`);
                    const data = await response.json();
                    console.log('🧪 API Test Result:', data);
                    return data;
                } catch (error) {
                    console.error('❌ API Test Failed:', error);
                    return error;
                }
            },
            help: () => {
                console.log(`
🧚‍♀️ Making with Tink - Admin Gallery Commands:

adminGallery.refresh()     - Reload community projects from Google Sheets
adminGallery.testAPI()     - Test the Google Sheets API connection  
adminGallery.help()        - Show this help message

📊 To approve projects:
1. Go to your Google Sheet
2. Add "TRUE" in the "Approved" column for projects you want to show
3. Run adminGallery.refresh() to update the website

🔗 Your Google Sheet: https://docs.google.com/spreadsheets/d/1UnOCu8HSufrnPXSIZYMV6Mqb0qqBL7uC-21Xh1aA7l4/edit
                `);
            }
        };
    </script>
</body>
</html>